{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\xxelt\\\\OneDrive\\\\Documentos\\\\PROYECTOS_PERSONALES\\\\REACT\\\\6.-ReactUdemy\\\\src\\\\components\\\\store\\\\CartProvider.js\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartContext = /*#__PURE__*/createContext();\nconst defaultCartState = {\n  items: [],\n  totalAmount: 0\n};\nfunction CartReducer(state, action) {\n  //state = initial state   <>   action = parameter into the dispatch function (or new item)\n  if (action.type === \"ADD\") {\n    const uptatedTotalAmount = state.totalAmount + action.item.price * action.item.amount; //item comes from the dispatchCartAction({}) function/\n\n    const existingCartItemIndex = state.items.findIndex(event => event.id === action.item.id); //We verify if the current item we're looking at in the array, has the same id as the item we're adding with this \"action\" which was dispatched. If both of them are the same, then will return the index position. If not, it will return -1.\n    const existingCartItem = state.items[existingCartItemIndex];\n    let uptdatedItems; //We create a new object to which a new object will be added in case this doesn't exist.\n\n    if (!existingCartItem) {\n      uptdatedItems = state.items.concat(action.item); //Concat joins arrays and returns an array with the joined arrays. Here, our inital value (the old one) is into state, and the value that will be concatened to it, will be the one into \"action\".\n    } else {\n      const uptdatedItem = {\n        //In case that we have 1 or more objects added to the cart\n        ...existingCartItem,\n        //then, we added the current values of that object into the new object (uptdatedItems).\n        amount: existingCartItem.amount + action.item.amount // and update only the new amount.\n      };\n\n      uptdatedItems = [...state.items];\n      uptdatedItems[existingCartItemIndex] = uptdatedItem;\n    }\n    return {\n      items: uptdatedItems,\n      totalAmount: uptatedTotalAmount\n    };\n  }\n  return defaultCartState;\n}\n_c = CartReducer;\nfunction CartProvider(props) {\n  _s();\n  const [cartState, dispatchCartAction] = useReducer(CartReducer, defaultCartState);\n  // console.log(cartState);\n\n  function addItemToCartHandler(item) {\n    dispatchCartAction({\n      type: \"ADD\",\n      item: item\n    });\n  }\n  function removeItemFromCartHandler(id) {\n    dispatchCartAction({\n      type: \"REMOVE\",\n      id: id\n    });\n  }\n  const cartContext = {\n    items: cartState.items,\n    totalAmount: cartState.totalAmount.toFixed(2),\n    addItem: addItemToCartHandler,\n    removeItem: removeItemFromCartHandler\n  };\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: cartContext,\n    children: props.children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n_s(CartProvider, \"PxEugEseoIJIbjFwtAJal5z5ClY=\");\n_c2 = CartProvider;\nexport default CartProvider;\nvar _c, _c2;\n$RefreshReg$(_c, \"CartReducer\");\n$RefreshReg$(_c2, \"CartProvider\");","map":{"version":3,"names":["createContext","useReducer","jsxDEV","_jsxDEV","CartContext","defaultCartState","items","totalAmount","CartReducer","state","action","type","uptatedTotalAmount","item","price","amount","existingCartItemIndex","findIndex","event","id","existingCartItem","uptdatedItems","concat","uptdatedItem","_c","CartProvider","props","_s","cartState","dispatchCartAction","addItemToCartHandler","removeItemFromCartHandler","cartContext","toFixed","addItem","removeItem","Provider","value","children","fileName","_jsxFileName","lineNumber","columnNumber","_c2","$RefreshReg$"],"sources":["C:/Users/xxelt/OneDrive/Documentos/PROYECTOS_PERSONALES/REACT/6.-ReactUdemy/src/components/store/CartProvider.js"],"sourcesContent":["import { createContext, useReducer } from \"react\";\r\n\r\nexport const CartContext = createContext();\r\n\r\nconst defaultCartState = {\r\n    items: [],\r\n    totalAmount: 0\r\n};\r\n\r\nfunction CartReducer (state, action){\r\n    //state = initial state   <>   action = parameter into the dispatch function (or new item)\r\n    if (action.type === \"ADD\") {\r\n        const uptatedTotalAmount = state.totalAmount + (action.item.price * action.item.amount); //item comes from the dispatchCartAction({}) function/\r\n        \r\n        const existingCartItemIndex = state.items.findIndex(event => event.id === action.item.id); //We verify if the current item we're looking at in the array, has the same id as the item we're adding with this \"action\" which was dispatched. If both of them are the same, then will return the index position. If not, it will return -1.\r\n        const existingCartItem = state.items[existingCartItemIndex];\r\n        let uptdatedItems; //We create a new object to which a new object will be added in case this doesn't exist.\r\n\r\n        if (!existingCartItem) {\r\n            uptdatedItems = state.items.concat(action.item); //Concat joins arrays and returns an array with the joined arrays. Here, our inital value (the old one) is into state, and the value that will be concatened to it, will be the one into \"action\".\r\n        \r\n        }else{\r\n            const uptdatedItem = { //In case that we have 1 or more objects added to the cart\r\n                ...existingCartItem, //then, we added the current values of that object into the new object (uptdatedItems).\r\n                amount: existingCartItem.amount + action.item.amount // and update only the new amount.\r\n            }\r\n\r\n            uptdatedItems = [...state.items];\r\n            uptdatedItems[existingCartItemIndex] = uptdatedItem;\r\n        }\r\n\r\n        \r\n        return {\r\n            items: uptdatedItems,\r\n            totalAmount: uptatedTotalAmount\r\n        }\r\n    }\r\n\r\n    return defaultCartState;\r\n}\r\n    \r\nfunction CartProvider(props){\r\n\r\n    const [cartState, dispatchCartAction] = useReducer(CartReducer, defaultCartState);\r\n    // console.log(cartState);\r\n    \r\n    function addItemToCartHandler(item){\r\n        dispatchCartAction({type: \"ADD\", item: item});\r\n    }\r\n\r\n    function removeItemFromCartHandler(id){\r\n        dispatchCartAction({type: \"REMOVE\", id: id});\r\n    }\r\n\r\n    const cartContext = {\r\n        items: cartState.items,\r\n        totalAmount: cartState.totalAmount.toFixed(2),\r\n        addItem: addItemToCartHandler,\r\n        removeItem: removeItemFromCartHandler\r\n    }; \r\n\r\n    return (\r\n        <CartContext.Provider value={cartContext}>\r\n            {props.children}\r\n        </CartContext.Provider>\r\n    )\r\n}\r\n\r\nexport default CartProvider;"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,UAAU,QAAQ,OAAO;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAElD,OAAO,MAAMC,WAAW,gBAAGJ,aAAa,CAAC,CAAC;AAE1C,MAAMK,gBAAgB,GAAG;EACrBC,KAAK,EAAE,EAAE;EACTC,WAAW,EAAE;AACjB,CAAC;AAED,SAASC,WAAWA,CAAEC,KAAK,EAAEC,MAAM,EAAC;EAChC;EACA,IAAIA,MAAM,CAACC,IAAI,KAAK,KAAK,EAAE;IACvB,MAAMC,kBAAkB,GAAGH,KAAK,CAACF,WAAW,GAAIG,MAAM,CAACG,IAAI,CAACC,KAAK,GAAGJ,MAAM,CAACG,IAAI,CAACE,MAAO,CAAC,CAAC;;IAEzF,MAAMC,qBAAqB,GAAGP,KAAK,CAACH,KAAK,CAACW,SAAS,CAACC,KAAK,IAAIA,KAAK,CAACC,EAAE,KAAKT,MAAM,CAACG,IAAI,CAACM,EAAE,CAAC,CAAC,CAAC;IAC3F,MAAMC,gBAAgB,GAAGX,KAAK,CAACH,KAAK,CAACU,qBAAqB,CAAC;IAC3D,IAAIK,aAAa,CAAC,CAAC;;IAEnB,IAAI,CAACD,gBAAgB,EAAE;MACnBC,aAAa,GAAGZ,KAAK,CAACH,KAAK,CAACgB,MAAM,CAACZ,MAAM,CAACG,IAAI,CAAC,CAAC,CAAC;IAErD,CAAC,MAAI;MACD,MAAMU,YAAY,GAAG;QAAE;QACnB,GAAGH,gBAAgB;QAAE;QACrBL,MAAM,EAAEK,gBAAgB,CAACL,MAAM,GAAGL,MAAM,CAACG,IAAI,CAACE,MAAM,CAAC;MACzD,CAAC;;MAEDM,aAAa,GAAG,CAAC,GAAGZ,KAAK,CAACH,KAAK,CAAC;MAChCe,aAAa,CAACL,qBAAqB,CAAC,GAAGO,YAAY;IACvD;IAGA,OAAO;MACHjB,KAAK,EAAEe,aAAa;MACpBd,WAAW,EAAEK;IACjB,CAAC;EACL;EAEA,OAAOP,gBAAgB;AAC3B;AAACmB,EAAA,GA9BQhB,WAAW;AAgCpB,SAASiB,YAAYA,CAACC,KAAK,EAAC;EAAAC,EAAA;EAExB,MAAM,CAACC,SAAS,EAAEC,kBAAkB,CAAC,GAAG5B,UAAU,CAACO,WAAW,EAAEH,gBAAgB,CAAC;EACjF;;EAEA,SAASyB,oBAAoBA,CAACjB,IAAI,EAAC;IAC/BgB,kBAAkB,CAAC;MAAClB,IAAI,EAAE,KAAK;MAAEE,IAAI,EAAEA;IAAI,CAAC,CAAC;EACjD;EAEA,SAASkB,yBAAyBA,CAACZ,EAAE,EAAC;IAClCU,kBAAkB,CAAC;MAAClB,IAAI,EAAE,QAAQ;MAAEQ,EAAE,EAAEA;IAAE,CAAC,CAAC;EAChD;EAEA,MAAMa,WAAW,GAAG;IAChB1B,KAAK,EAAEsB,SAAS,CAACtB,KAAK;IACtBC,WAAW,EAAEqB,SAAS,CAACrB,WAAW,CAAC0B,OAAO,CAAC,CAAC,CAAC;IAC7CC,OAAO,EAAEJ,oBAAoB;IAC7BK,UAAU,EAAEJ;EAChB,CAAC;EAED,oBACI5B,OAAA,CAACC,WAAW,CAACgC,QAAQ;IAACC,KAAK,EAAEL,WAAY;IAAAM,QAAA,EACpCZ,KAAK,CAACY;EAAQ;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACG,CAAC;AAE/B;AAACf,EAAA,CAzBQF,YAAY;AAAAkB,GAAA,GAAZlB,YAAY;AA2BrB,eAAeA,YAAY;AAAC,IAAAD,EAAA,EAAAmB,GAAA;AAAAC,YAAA,CAAApB,EAAA;AAAAoB,YAAA,CAAAD,GAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}